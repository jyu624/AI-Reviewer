# AI Reviewer - AWS Bedrock 配置示例
# 专用于 AWS Bedrock AI 服务的配置

# =============================================================================
# AWS Bedrock AI 服务配置
# =============================================================================
aiService:
  provider: "bedrock"

  # AWS 凭证配置（三种方式任选其一）
  # 方式1: 直接配置（格式: ACCESS_KEY_ID:SECRET_ACCESS_KEY）
  apiKey: "YOUR_AWS_ACCESS_KEY_ID:YOUR_AWS_SECRET_ACCESS_KEY"

  # 方式2: 使用环境变量
  # export AWS_ACCESS_KEY_ID=your_access_key
  # export AWS_SECRET_ACCESS_KEY=your_secret_key
  # apiKey: ""  # 留空，使用环境变量

  # 方式3: 使用 AWS 默认凭证链（~/.aws/credentials）
  # apiKey: ""  # 留空，使用默认凭证链

  # AWS 区域配置
  region: "us-east-1"  # 根据模型所在区域选择

  # 模型选择（根据需要选择）
  model: "anthropic.claude-v2"  # 推荐：Claude v2（平衡性能和成本）

  # 其他可用模型:
  # - anthropic.claude-v2                          # Claude v2
  # - anthropic.claude-instant-v1                  # Claude Instant（更快）
  # - anthropic.claude-3-sonnet-20240229-v1:0     # Claude 3 Sonnet
  # - anthropic.claude-3-haiku-20240307-v1:0      # Claude 3 Haiku
  # - amazon.titan-text-express-v1                 # Titan Text Express
  # - amazon.titan-text-lite-v1                    # Titan Text Lite
  # - meta.llama2-13b-chat-v1                      # Llama 2 13B
  # - meta.llama2-70b-chat-v1                      # Llama 2 70B
  # - cohere.command-text-v14                      # Cohere Command
  # - cohere.command-light-text-v14                # Cohere Command Light
  # - ai21.j2-mid-v1                               # AI21 Jurassic-2 Mid
  # - ai21.j2-ultra-v1                             # AI21 Jurassic-2 Ultra

  # Token 和温度配置
  maxTokens: 4000        # 最大生成 token 数
  temperature: 0.3       # 温度（0-1，越低越确定性）

  # 超时配置（毫秒）
  connectTimeout: 300000     # 连接超时: 5分钟
  readTimeout: 120000        # 读取超时: 2分钟
  writeTimeout: 15000        # 写入超时: 15秒
  analyzeTimeout: 300000     # 单个分析超时: 5分钟
  batchAnalyzeTimeout: 600000 # 批量分析超时: 10分钟

  # 重试配置
  maxRetries: 3          # 最大重试次数
  retryDelay: 2000       # 重试延迟（毫秒）

  # 并发配置
  maxConcurrency: 3      # 最大并发请求数（根据配额调整）

# =============================================================================
# 缓存配置
# =============================================================================
cache:
  enabled: true
  type: "file"
  ttlHours: 24
  maxSize: 1000
  cleanupIntervalMinutes: 60

  fileCache:
    baseDir: "${user.home}/.ai-reviewer-cache"
    indexFile: "cache-index.json"
    compression: true

# =============================================================================
# 文件扫描配置
# =============================================================================
fileScan:
  includePatterns:
    - "*.java"
    - "*.py"
    - "*.js"
    - "*.ts"
    - "*.go"
    - "*.rs"
    - "*.cpp"
    - "*.c"
    - "*.h"

  excludePatterns:
    - "node_modules/**"
    - "target/**"
    - "build/**"
    - ".git/**"
    - "*.min.js"

  maxFileSize: 10485760  # 10MB

# =============================================================================
# 报告配置
# =============================================================================
report:
  format: "markdown"     # markdown, html, json
  outputDir: "./reports"
  includeSourceCode: false
  maxCodeSnippetLines: 20

# =============================================================================
# 质量门禁配置
# =============================================================================
qualityGate:
  enabled: true
  minScore: 60           # 最低通过分数
  failOnLowScore: false  # 低于最低分是否失败

  dimensions:
    codeQuality: 50
    architecture: 50
    technicalDebt: 60
    security: 70

# =============================================================================
# AWS Bedrock 使用说明
# =============================================================================
#
# 1. 配置 AWS 凭证
#    - 方式1: 在配置文件中直接配置 apiKey
#    - 方式2: 设置环境变量 AWS_ACCESS_KEY_ID 和 AWS_SECRET_ACCESS_KEY
#    - 方式3: 使用 AWS CLI 配置凭证（~/.aws/credentials）
#
# 2. 确保 IAM 权限
#    需要以下权限:
#    - bedrock:InvokeModel
#    - bedrock:InvokeModelWithResponseStream (如果使用流式响应)
#
# 3. 选择合适的区域
#    不同区域支持的模型可能不同，常用区域:
#    - us-east-1 (弗吉尼亚北部)
#    - us-west-2 (俄勒冈)
#    - eu-west-1 (爱尔兰)
#    - ap-southeast-1 (新加坡)
#
# 4. 模型选择建议
#    - Claude v2/v3: 最全面，适合复杂分析
#    - Titan: 成本低，适合大批量处理
#    - Llama 2: 开源模型，适合特定场景
#    - Cohere: 适合文本生成和分类
#
# 5. 成本优化
#    - 使用缓存减少重复调用
#    - 根据任务选择合适的模型
#    - 控制 maxTokens 参数
#    - 调整并发数避免超配额
#
# 6. 环境变量示例
#    export AWS_ACCESS_KEY_ID="your_access_key"
#    export AWS_SECRET_ACCESS_KEY="your_secret_key"
#    export AWS_REGION="us-east-1"
#    export AWS_BEDROCK_MODEL_ID="anthropic.claude-v2"
#

